---
import Layout from '../../layouts/Layout.astro';
import Navigation from '../../components/Navigation.astro';
import Card from '../../components/Card.astro';
import BackgroundCanvas from '../../components/BackgroundCanvas';
import Footer from '../../components/Footer.astro';
import FAQ from '../../components/FAQ.astro';
import HowTo from '../../components/HowTo.astro';
import Breadcrumb from '../../components/Breadcrumb.astro';

// Product structured data
const productSchema = {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "Smooth Search",
    "applicationCategory": "WebApplication",
    "operatingSystem": "WordPress",
    "description": "The first WooCommerce search engine powered by WebAssembly. Blazing fast indexing and retrieval directly in the browser using Rust.",
    "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
    },
    "author": {
        "@type": "Organization",
        "name": "Smooth Plugins"
    },
    "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "5",
        "ratingCount": "1"
    },
    "softwareVersion": "1.0.0",
    "softwareRequirements": "WordPress 5.8+, WooCommerce 5.0+, Modern browser with WebAssembly support",
    "applicationSubCategory": "E-commerce Search Engine"
};

// FAQ data for AI discoverability
const faqs = [
    {
        question: "What is Smooth Search?",
        answer: "Smooth Search is the first WooCommerce search engine powered by WebAssembly and Rust. It runs entirely in the user's browser, delivering search results in under 10ms with zero server database load."
    },
    {
        question: "How does WebAssembly improve WordPress search performance?",
        answer: "WebAssembly allows Rust code to run at near-native speed directly in the browser. Instead of sending search queries to your server for database processing, Smooth Search pre-compiles your product catalog into an optimized binary that loads once and handles all searches client-side, eliminating server load and network latency."
    },
    {
        question: "Does Smooth Search work with my existing WordPress theme?",
        answer: "Yes! Smooth Search is designed as a drop-in replacement for standard WooCommerce search. It works with any WordPress theme and maintains compatibility with WooCommerce filters, attributes, and taxonomies without requiring code changes."
    },
    {
        question: "How many products can Smooth Search handle?",
        answer: "Smooth Search is built for scale. It efficiently handles <strong>100,000+ products</strong> while maintaining sub-10ms query response times. The Rust engine uses Structure-of-Arrays (SoA) indexing for optimal performance even with massive catalogs."
    },
    {
        question: "What are the system requirements for Smooth Search?",
        answer: "Smooth Search requires WordPress 5.8 or higher, WooCommerce 5.0 or higher, and runs on any modern browser that supports WebAssembly (Chrome, Firefox, Safari, Edge). No special server configuration is needed."
    },
    {
        question: "Is Smooth Search free?",
        answer: "Yes, Smooth Search is currently available as a free, open-source plugin. We believe in making high-performance tools accessible to all WooCommerce store owners."
    },
    {
        question: "How do I install Smooth Search?",
        answer: "Installation is simple: download the plugin from GitHub, upload it to your WordPress plugins directory via the admin panel, activate it, and configure your search preferences. The initial index builds automatically in the background."
    },
    {
        question: "Will Smooth Search reduce my server costs?",
        answer: "Absolutely. By moving search computation from your server to the client browser, Smooth Search eliminates database queries on every keystroke. Most stores see an <strong>80% reduction</strong> in search-related server load, which can significantly reduce hosting costs for high-traffic sites."
    },
    {
        question: "How does Smooth Search compare to traditional WordPress search?",
        answer: "Traditional WordPress search queries your MySQL database on every keystroke, creating server load and latency. Smooth Search pre-compiles your catalog once, serves it via CDN, and processes all searches in the browser using Rust/WebAssembly - resulting in 200ms average response time vs several seconds for traditional search."
    },
    {
        question: "Does Smooth Search support search filters and facets?",
        answer: "Yes! Smooth Search fully supports WooCommerce product filters, categories, tags, attributes, and custom taxonomies. You can filter by price range, categories, product attributes, and more, all processed instantly client-side."
    }
];

// Installation guide data
const installationSteps = [
    {
        name: "Download the Plugin",
        text: "Visit the GitHub releases page and download the latest smooth-search.zip file to your computer."
    },
    {
        name: "Upload to WordPress",
        text: "In your WordPress admin panel, navigate to Plugins > Add New > Upload Plugin. Select the downloaded smooth-search.zip file and click Install Now."
    },
    {
        name: "Activate the Plugin",
        text: "After installation completes, click the Activate Plugin button. Smooth Search will appear in your WordPress admin sidebar."
    },
    {
        name: "Configure Search Settings",
        text: "Navigate to Smooth Search > Settings in your WordPress admin. Configure which product fields to index (title, description, SKU, attributes) and set your search preferences."
    },
    {
        name: "Build Initial Index",
        text: "Click the 'Build Index' button to create your first search index. This compiles your product catalog into the optimized WebAssembly binary. Depending on catalog size, this takes 1-5 minutes and runs in the background."
    },
    {
        name: "Test Your Search",
        text: "Visit your WooCommerce store and try the search bar. You should see instant results as you type, powered by the new WebAssembly engine!"
    }
];
---

<Layout title="Smooth Search" description="The first WooCommerce search engine powered by WebAssembly. Experience sub-10ms queries, zero server load, and support for 100,000+ products.">
    <BackgroundCanvas client:only="react" />
    <div class="layout-container">
        <Navigation active="Smooth Search" />

        <Breadcrumb
            items={[
                { name: "Products", url: "/products" },
                { name: "Smooth Search", url: "/products/smooth-search" }
            ]}
        />

        <Card 
            title="Smooth Search" 
            kicker="The Rust-Powered WordPress Plugin"
            variant="peach"
            span={12}
        >
            <div class="product-hero">
                <p class="card-desc">Experience lightning-fast searching for WooCommerce. Smooth Search moves the heavy lifting from your PHP server to the visitor's browser using WebAssembly and Rust.</p>
                <div class="product-features">
                    <div class="feature-item">
                        <span class="feature-icon">ðŸ¦€</span>
                        <div>
                            <strong>Rust Core</strong>
                            <p>Safety and speed at the engine level.</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">âš¡</span>
                        <div>
                            <strong>WASM Execution</strong>
                            <p>Runs directly in the browser for instant results.</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">ðŸ“¦</span>
                        <div>
                            <strong>SoA Indexing</strong>
                            <p>Optimized data structures for massive scale.</p>
                        </div>
                    </div>
                </div>
            </div>
        </Card>

        <Card title="How it works" kicker="Technical Depth" variant="white" span={6}>
            <p>Smooth Search works by pre-compiling your product database into an optimized binary blob. This blob is then served via CDN. When a user visits your site, the Rust engine loads this blob into memory, allowing for millisecond search times without a single database query.</p>
        </Card>

        <Card title="Performance at Scale" kicker="The Numbers" variant="lavender" span={6}>
            <ul class="stats-list">
                <li><strong>100,000+</strong> Products Supported</li>
                <li><strong>&lt; 10ms</strong> Query Speed</li>
                <li><strong>80%</strong> Reduction in Server Load</li>
            </ul>
        </Card>

        <Card title="Get Started" kicker="Download" variant="black" span={12}>
            <div class="cta-section">
                <p>Ready to level up your store's performance?</p>
                <div class="cta-buttons">
                    <a href="#" class="cta-button primary">Download Now</a>
                    <a href="#" class="cta-button primary">Read Documentation</a>
                </div>
            </div>
        </Card>

        <div class="howto-container">
            <HowTo
                name="How to Install Smooth Search"
                description="Get Smooth Search up and running on your WooCommerce store in minutes. No technical expertise required."
                estimatedTime="PT10M"
                supply={["WordPress 5.8+", "WooCommerce 5.0+", "Modern web browser"]}
                steps={installationSteps}
            />
        </div>

        <div class="faq-container">
            <FAQ
                items={faqs}
                title="Frequently Asked Questions"
                description="Everything you need to know about Smooth Search, WebAssembly-powered WooCommerce search."
            />
        </div>

        <Footer />
    </div>

    <!-- Product Schema -->
    <script type="application/ld+json" set:html={JSON.stringify(productSchema)} />
</Layout>

<style>
    .product-hero {
        display: flex;
        flex-direction: column;
        gap: 40px;
    }

    .product-features {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 24px;
        margin-top: 20px;
    }

    .feature-item {
        display: flex;
        gap: 16px;
        align-items: flex-start;
    }

    .feature-icon {
        font-size: 24px;
    }

    .stats-list {
        list-style: none;
        margin-top: 20px;
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    .stats-list li {
        font-size: 18px;
    }

    .cta-section {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .cta-buttons {
        display: flex;
        gap: 16px;
    }

    .cta-button {
        padding: 14px 28px;
        border-radius: var(--radius-pill);
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .cta-button.primary {
        background: var(--c-white);
        color: var(--c-black);
    }

    .cta-button.secondary {
        border: 1px solid rgba(255,255,255,0.3);
        color: var(--c-white);
    }

    .cta-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    .howto-container {
        grid-column: 1 / -1;
        max-width: 900px;
        margin: 60px auto 0;
    }

    .faq-container {
        grid-column: 1 / -1;
        max-width: 900px;
        margin: 60px auto 0;
    }

    @media (max-width: 768px) {
        .howto-container {
            margin: 40px auto 0;
        }

        .faq-container {
            margin: 40px auto 0;
        }
        .product-features {
            grid-template-columns: 1fr;
        }

        .cta-section {
            flex-direction: column;
            gap: 20px;
            align-items: flex-start;
        }

        .cta-buttons {
            flex-direction: column;
            width: 100%;
        }

        .cta-button {
            width: 100%;
            text-align: center;
            justify-content: center;
        }
    }

    @media (max-width: 640px) {
        .product-hero {
            gap: 24px;
        }

        .product-features {
            gap: 20px;
        }

        .feature-item {
            gap: 12px;
        }

        .feature-icon {
            font-size: 20px;
        }

        .stats-list {
            margin-top: 16px;
            gap: 10px;
        }

        .stats-list li {
            font-size: 16px;
        }

        .cta-section p {
            font-size: 16px;
        }

        .cta-button {
            padding: 12px 20px;
            font-size: 15px;
        }
    }

    @media (max-width: 480px) {
        .feature-item {
            font-size: 14px;
        }

        .stats-list li {
            font-size: 15px;
        }
    }
</style>
